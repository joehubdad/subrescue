[gd_scene load_steps=10 format=2]

[ext_resource path="res://entities/rescuesub.png" type="Texture" id=1]
[ext_resource path="res://entities/RescueSub.gd" type="Script" id=2]
[ext_resource path="res://art/spot.png" type="Texture" id=4]
[ext_resource path="res://SFX/AnchorCam2D.tscn" type="PackedScene" id=5]
[ext_resource path="res://SFX/AnchorDetector2D.tscn" type="PackedScene" id=6]

[sub_resource type="OccluderPolygon2D" id=4]
polygon = PoolVector2Array( -79.8333, -33.3333, -48.1667, -50, 78.5, -56.6667, 111.833, -10, 60.1667, -1.66666, -26.5, 3.33334, -48.1667, 3.33334, -78.1667, -8.33334 )

[sub_resource type="CapsuleShape2D" id=2]
radius = 48.2685
height = 114.485

[sub_resource type="CapsuleShape2D" id=3]
radius = 19.8285
height = 34.9228

[sub_resource type="Animation" id=1]
resource_name = "Sufacemotion"
length = 4.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 0,
"values": [ 0.0, 4.0, 8.0, 4.0, 0.0, -4.5, -9.0, -4.0, 0.0 ]
}

[node name="RescueSub" type="KinematicBody2D" groups=["player", "submarine"]]
light_mask = 0
position = Vector2( 520, -6 )
z_index = 1
collision_mask = 222
script = ExtResource( 2 )
__meta__ = {
"_edit_group_": true,
"_edit_horizontal_guides_": [ 93.0 ]
}
bouyant_force = Vector2( 0, -118 )

[node name="aftFlood" type="Light2D" parent="."]
light_mask = 0
position = Vector2( -86, 116 )
scale = Vector2( 2, 2 )
z_index = 2
enabled = false
texture = ExtResource( 4 )
texture_scale = 4.0
energy = 1.2
mode = 2
range_z_min = -2
range_z_max = 5
range_layer_max = 5
range_item_cull_mask = 43
shadow_color = Color( 0.00392157, 0.00784314, 0.0196078, 0.901961 )
shadow_item_cull_mask = 86

[node name="fwdFlood" type="Light2D" parent="."]
light_mask = 0
position = Vector2( 48, 98 )
scale = Vector2( 2, 2 )
z_index = 2
enabled = false
texture = ExtResource( 4 )
texture_scale = 4.0
energy = 1.8
mode = 2
range_z_min = -5
range_z_max = 5
range_layer_max = 5
range_item_cull_mask = 43
shadow_color = Color( 0.00392157, 0.00784314, 0.0196078, 0.901961 )
shadow_item_cull_mask = 86

[node name="Sprite" type="Sprite" parent="."]
self_modulate = Color( 0.996078, 0.996078, 1, 1 )
show_behind_parent = true
light_mask = 8
position = Vector2( -22.1, 61 )
scale = Vector2( 0.6, 0.6 )
texture = ExtResource( 1 )

[node name="LightOccluder2D" type="LightOccluder2D" parent="Sprite"]
light_mask = 16
occluder = SubResource( 4 )
light_mask = 16

[node name="RescueModule" type="CollisionShape2D" parent="."]
position = Vector2( -23, 54 )
rotation = 1.42782
shape = SubResource( 2 )

[node name="AnchorCam2D" parent="." instance=ExtResource( 5 )]
position = Vector2( -20, 57 )
zoom = Vector2( 1.5, 1.5 )
process_mode = 0
limit_left = 0
limit_top = -1000

[node name="AnchorDetector2D" parent="." instance=ExtResource( 6 )]
position = Vector2( -20, 57 )

[node name="TransferHatch" type="Area2D" parent="."]
position = Vector2( -24.4811, 129.258 )
collision_layer = 32
collision_mask = 64

[node name="HatchContact" type="CollisionShape2D" parent="TransferHatch"]
position = Vector2( -4.86314, 12.4964 )
rotation = 1.5708
shape = SubResource( 3 )
__meta__ = {
"_edit_group_": true
}

[node name="BoatRock" type="AnimationPlayer" parent="."]
root_node = NodePath("../Sprite")
anims/Sufacemotion = SubResource( 1 )

[node name="Position2D" type="Position2D" parent="."]
position = Vector2( -11, 7 )
rotation = -0.15708

[node name="fwdlight" type="Position2D" parent="."]
position = Vector2( 39, 99 )
z_index = 2
z_as_relative = false

[node name="aftlight" type="Position2D" parent="."]
position = Vector2( -82, 117 )

[connection signal="anchor_detached" from="AnchorDetector2D" to="AnchorCam2D" method="_on_AnchorDetector2D_anchor_detached"]
[connection signal="anchor_detected" from="AnchorDetector2D" to="AnchorCam2D" method="_on_AnchorDetector2D_anchor_detected"]
